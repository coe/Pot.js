/*!
 * Pot.js - JavaScript utility library (lite)
 *
 * Pot.js implements practical tendency as a substitution utility library.
 * That includes asynchronous methods as "Deferred"
 *  for solution to heavy process.
 * That is fully ECMAScript compliant.
 *
 * Version 1.00, 2011-10-04
 * Copyright (c) 2011 polygon planet <polygon.planet@gmail.com>
 * Dual licensed under the MIT and GPL v2 licenses.
 */
(function(c,g){var m={VERSION:"1.00",TYPE:"lite"},q=Array.prototype.slice,f=Array.prototype.concat,u=Object.prototype.toString,l=/List|Collection/i,e=/^[\s\u00A0\u3000]+|[\s\u00A0\u3000]+$/g,n=/([-.*+?^${}()|[\]\/\\])/g,o,t,i,h;
(function(z){j(m,{NAME:"Pot",System:(function(B){if(typeof window==="undefined"){B.isNonBrowser=true
}else{B.isWebBrowser=true}if(B.isNonBrowser&&typeof process!=="undefined"&&process&&process.version&&typeof require==="function"&&(typeof exports==="object"||(typeof module==="object"&&typeof module.exports==="object"))){B.isNodeJS=true
}if(this&&this.ActiveXObject||typeof ActiveXObject!=="undefined"){B.hasActiveXObject=true
}try{if(typeof((function(){yield})()).next==="function"){B.isYieldable=true}}catch(A){}B.isWaitable=false;
return B})({}),toString:function(){return r(this.NAME||this.name||typeof this)},Browser:(function(C){var A={},I,D,B,H,J,E,F,G;
J={webkit:/(webkit)(?:.*version|)[\s\/]+([\w.]+)/,opera:/(opera)(?:.*version|)[\s\/]+([\w.]+)/,msie:/(msie)[\s\/]+([\w.]+)/,mozilla:/(?!^.*compatible.*$).*(mozilla)(?:.*?\s+rv[:\s\/]+([\w.]+)|)/};
E=[/webkit.*(chrome)[\s\/]+([\w.]+)/,/webkit.*version[\s\/]+([\w.]+).*(safari)/,/webkit.*(safari)[\s\/]+([\w.]+)/,/(iphone).*version[\s\/]+([\w.]+)/,/(ipod).*version[\s\/]+([\w.]+)/,/(ipad).*version[\s\/]+([\w.]+)/,/(android).*version[\s\/]+([\w.]+)/,/(blackberry)(?:[\s\d]*|.*version)[\s\/]+([\w.]+)/,J.webkit,J.opera,J.msie,/(?!^.*compatible.*$).*mozilla.*?(firefox)(?:[\s\/]+([\w.]+)|)/,J.mozilla];
I=String(C&&C.userAgent).toLowerCase();if(I){for(F=0,G=E.length;F<G;F++){if((D=E[F].exec(I))){break
}}if(D){if(/[^a-z]/.test(D[1])){B=D[2];H=D[1]}else{B=D[1];H=D[2]}if(B){A[B]={version:String(H||0)}
}}D=J.webkit.exec(I)||J.opera.exec(I)||J.msie.exec(I)||J.mozilla.exec(I)||[];if(D&&D[1]){A[D[1]]={version:String(D[2]||0)}
}}return A})(z),LANG:(function(A){return((A&&(A.language||A.userLanguage||A.browserLanguage||A.systemLanguage))||"en").split(/[^a-zA-Z0-9]+/).shift().toLowerCase()
})(z),OS:(function(H){var A={},E=H||{},I,B,C,J,F,G,D;I=String(E.platform).toLowerCase();
B=String(E.userAgent).toLowerCase();C=String(E.appVersion).toLowerCase();J=[{s:"iphone",p:I},{s:"ipod",p:I},{s:"ipad",p:B},{s:"blackberry",p:B},{s:"android",p:B},{s:"mac",p:I},{s:"win",p:I},{s:"linux",p:I},{s:"x11",p:C}];
for(F=0,G=J.length;F<G;F++){D=J[F];if(~D.p.indexOf(D.s)){A[D.s]=true}}if(A.android&&!~B.indexOf("mobile")){A.androidtablet=true
}if(A.ipad||A.androidtablet){A.tablet=true}A.toString=function(){var K=[],L;for(L in A){if(A[L]===true){K.push(L)
}}return K.join("/")};return A})(z),Global:(function(){if(!c||typeof c!=="object"||!("setTimeout" in c)){c=this
}return this})(),noop:function(){},tmp:{},Internal:{getMagicNumber:j(function(){var A=arguments.callee;
return A.INITIAL_NUMBER+(A.count++)},{count:0,INITIAL_NUMBER:Number("0xC26BEB642C0A")||(16^6)}),getExportObject:function(){var A;
if(m.System.isNodeJS){if(typeof module==="object"&&typeof module.exports==="object"){A=module.exports
}else{if(typeof exports==="object"){A=exports}else{A=c}}}else{A=c}return A}},update:j})
})(typeof navigator!=="undefined"&&navigator||{});(function(B){var A,z,C={};for(A=0,z=B.length;
A<z;A++){(function(){var E=B[A],D=E.toLowerCase();C[r(E)]=D;m["is"+E]=(function(){switch(D){case"error":return function(F){return(F&&(F instanceof Error||m.typeOf(F)===D))||false
};case"date":return function(F){return(F&&(F instanceof Date||m.typeOf(F)===D))||false
};default:return function(F){return m.typeOf(F)===D}}})()})()}m.update({typeOf:function(D){return D==null?String(D):(C[u.call(D)]||"object")
},typeLikeOf:function(E){var D=m.typeOf(E);if(D!=="array"&&m.isArrayLike(E)){D="array"
}return D}})})("Boolean Number String Function Array Date RegExp Object Error".split(" "));
(function(z){j(m.Internal,{setTimeout:function(A,C){try{return setTimeout(A,C||0)
}catch(B){}},clearTimeout:function(B){try{return clearTimeout(B)}catch(A){}},setInterval:function(A,C){try{return setInterval(A,C||0)
}catch(B){}},clearInterval:function(B){try{return clearInterval(B)}catch(A){}}});
m.update({StopIteration:(function(){var A=function(){return A};(function(B){B.NAME=z;
B.toString=m.toString;B.prototype={constructor:B,NAME:B.NAME,toString:B.toString};
B.prototype.constructor.prototype=B.constructor.prototype})(A);return new A()})(),isStopIter:function(C){var A=false;
try{if(m.StopIteration!==g&&(C==m.StopIteration||C instanceof m.StopIteration)){A=true
}else{if(typeof x!=="undefined"&&(C==x||C instanceof x)){A=true}else{if(this&&this.StopIteration!==g&&(C==this.StopIteration||C instanceof this.StopIteration)){A=true
}else{if(~u.call(C).indexOf(z)||~String(C&&C.toString&&C.toString()||C).indexOf(z)){A=true
}}}}}catch(B){A=false}return A},isArrayLike:function(B){var A;if(!B){return false
}A=B.length;if(m.isArray(B)||B instanceof Array||B.constructor===Array){return true
}if(!m.isNumber(A)||(!m.isObject(B)&&!m.isArray(B))||B===m||B===m.Global||B===c||m.isWindow(B)||m.isDocument(B)||m.isElement(B)){return false
}if(B.isArray||m.isFunction(B.callee)||m.isNodeList(B)||((typeof B.item==="function"||typeof B.nextNode==="function")&&B.nodeType!=3&&B.nodeType!=4)||(0 in B&&((A-1) in B))||l.test(u.call(B))){return true
}else{return false}},isDeferred:function(A){return A!=null&&((A instanceof m.Deferred)||(A.id!=null&&A.id===m.Deferred.prototype.id&&A.NAME!=null&&A.NAME===m.Deferred.prototype.NAME))
},isIter:function(A){return A!=null&&((A instanceof m.Iter)||(A.id!=null&&A.id===m.Iter.prototype.id&&A.NAME!=null&&A.NAME===m.Iter.prototype.NAME&&typeof A.next==="function"))
},isNumeric:function(A){return(A==null||A===""||(typeof A==="object"&&A.constructor!==Number))?false:!isNaN(A-0)
},isInt:function(A){return m.isNumber(A)&&isFinite(A)&&A%1==0},isNativeCode:function(B){var A;
if(!B){return false}A=B.toString();return !!(~A.indexOf("[native code]")&&A.length<=92)
},isBuiltinMethod:function(A){return A!=null&&(typeof A==="function"||A.constructor===Function)&&m.isNativeCode(A)
},isWindow:function(A){return A!=null&&typeof A==="object"&&"setInterval" in A&&A.window==A&&!!(A.location||A.screen||A.navigator||A.document)
},isDocument:function(A){return A!=null&&typeof A==="object"&&"getElementById" in A&&A.nodeType>0&&typeof A.documentElement==="object"
},isElement:function(A){return A!=null&&typeof A==="object"&&A.nodeType==1},isNodeLike:function(A){return A!=null&&typeof A==="object"&&A.nodeType>0
},isNodeList:function(A){var B;if(A&&m.isNumber(A.length)){B=typeof A.item;if(m.isObject(A)){return B==="function"||B==="string"
}else{if(m.isFunction(A)){return B==="function"}}}return false}})})("StopIteration");
if(typeof x==="undefined"){var x=m.StopIteration}j(m.System,{isBuiltinObjectKeys:m.isBuiltinMethod(Object.keys),isBuiltinArrayForEach:m.isBuiltinMethod(Array.prototype.forEach),isBuiltinArrayIndexOf:m.isBuiltinMethod(Array.prototype.indexOf),isBuiltinArrayLastIndexOf:m.isBuiltinMethod(Array.prototype.lastIndexOf)});
function j(){var B=arguments,A=B.length,C=1,F,E,z;if(A===C){F=this||{};C--}else{F=B[C-1]
}if(F){do{z=B[C];if(z){for(E in z){try{F[E]=z[E]}catch(D){}}}}while(++C<A)}return F
}function y(B,A){var F,C,z,D=arguments.callee;if(D.canNodeList==null){if(c){try{q.call(c.documentElement.childNodes,0)[0].nodeType;
D.canNodeList=true}catch(E){D.canNodeList=false}}}if(B==null){F=[B]}else{switch(m.typeOf(B)){case"array":F=B.slice();
break;case"object":if(m.isArrayLike(B)){if(!D.canNodeList&&m.isNodeList(B)){F=[];
C=0;z=B.length;do{F[C]=B[C]}while(++C<z)}else{F=q.call(B)}break}default:F=q.call(f.call([],B));
break}}if(A>0){F=F.slice(A)}return F}function b(){return(new Date()).getTime()}function s(B,C){var A="",D,z=arguments.length;
if(B!==null){switch(typeof B){case"string":case"number":case"xml":A=B;break;case"boolean":if(z>=2&&!C){A=B
}else{if(!C){A=B?1:""}}break;case"object":if(B){D=B.constructor;if(D===String||D===Number||(typeof XML!=="undefined"&&D===XML)){A=B
}else{if(D===Boolean){if(z>=2&&!C){A=B}else{if(!C){A=(B==true)?1:""}}}}}break;default:break
}}return A.toString()}function v(B,C,z){var A;if(C){A=new RegExp(["^[","]+|[","]+$"].join(w(C)),"g"+(z?"i":""))
}else{A=e}return s(B,true).replace(A,"")}function w(z){return s(z,true).replace(n,"\\$1")
}function p(D){var A,B,z;B=function(K,G){var E=false,I,F;try{if(!m.XPCOM.isEnabled){throw 0
}I=m.XPCOM.getMostRecentWindow();if(!I){throw I}if(I.FirebugConsole&&I.FirebugContext){F=new I.FirebugConsole(I.FirebugContext,I.content);
F[K].apply(F,G);E=true}else{if(I.Firebug&&I.Firebug.Console){try{I.Firebug.Console.logFormatted.call(I.Firebug.Console,y(G),I.FirebugContext,K);
E=true}catch(J){}}}}catch(H){}return E};try{if(!B("log",arguments)){if(!m.XPCOM.isEnabled){throw 0
}z=t["@mozilla.org/consoleservice;1"].getService(o.nsIConsoleService);z.logStringMessage(String(D))
}}catch(C){if(typeof GM_log!=="undefined"){A=GM_log}else{if(typeof console!=="undefined"){A=console.debug||console.dir||console.log
}else{if(typeof opera!=="undefined"&&opera.postError){A=opera.postError}else{A=function(E){throw E
}}}}try{if(A.apply){A.apply(A,arguments)}else{throw A}}catch(C){try{A(D)}catch(C){try{console.log(D)
}catch(C){throw D}}}}return D}m.update({rescape:w,arrayize:y,stringify:s,trim:v,now:b,debug:p});
function d(C,H,z){var D,E,A,B;if(C){E=C.length;try{if(E&&((E-1) in C)){for(D=0;D<E;
D++){if(D in C){try{A=C[D]}catch(F){continue}H.call(z,A,D,C)}}}else{for(D in C){try{A=C[D]
}catch(F){continue}H.call(z,A,D,C)}}}catch(G){B=G;if(!m.isStopIter(B)){throw B}}}return C
}function k(A,z){return[String((A&&(A.NAME||A.name))||(void 0)),Math.random().toString(36).substring(2),b()].join(arguments.length>=2?z:"-")
}function r(z){return"[object "+z+"]"}function a(C,A){var B,z;if(C&&A){if(m.isObject(C.options)){B=C.options
}else{if(m.isObject(C)){B=C}}if(m.isObject(A.options)){z=A.options}else{if(m.isObject(A)){z=A
}}if("async" in z){B.async=!!z.async}if("speed" in z&&m.isNumeric(z.speed)){B.speed=z.speed
}if("cancellers" in z){if(!z.cancellers||!z.cancellers.length){z.cancellers=[]}else{if(B.cancellers&&B.cancellers.length){B.cancellers=f.call([],y(B.cancellers),y(z.cancellers))
}else{B.cancellers=y(z.cancellers)}}}if("stoppers" in z){if(!z.stoppers||!z.stoppers.length){z.stoppers=[]
}else{if(B.stoppers&&B.stoppers.length){B.stoppers=f.call([],y(B.stoppers),y(z.stoppers))
}else{B.stoppers=y(z.stoppers)}}}}}(function(){m.update({Deferred:function(){return m.isDeferred(this)?this.init(arguments):new m.Deferred.fn.init(arguments)
}});j(m.Deferred,{StopIteration:m.StopIteration,speeds:{limp:2400,doze:1000,slow:100,normal:36,fast:20,rapid:12,ninja:0},states:{success:1,failure:2,fired:3,unfired:4}});
d(m.Deferred.states,function(K,J){m.Deferred.states[K]=J});j(m.Deferred,{defaults:{speed:m.Deferred.speeds.ninja,canceller:null,stopper:null,async:true}});
m.Deferred.fn=m.Deferred.prototype=j(m.Deferred.prototype,{constructor:m.Deferred,id:m.Internal.getMagicNumber(),serial:null,chains:[],chained:false,cancelled:false,freezing:false,tilling:false,waiting:false,nested:0,state:null,results:null,options:{},plugins:{},NAME:"Deferred",toString:m.toString,isDeferred:m.isDeferred,init:function(J){if(!this.serial){this.serial=k(this)
}this.options={};this.plugins={};z.call(this,y(J),m.Deferred.defaults);j(this,{state:m.Deferred.states.unfired,results:{success:null,failure:null},chains:[],nested:0,chained:false,cancelled:false,freezing:false,tilling:false,waiting:false});
m.Internal.referSpeeds.call(this,m.Deferred.speeds);return this},speed:function(M){var K=this,J=arguments,L;
if(m.isNumeric(M)){L=M-0}else{if(m.isNumeric(m.Deferred.speeds[M])){L=m.Deferred.speeds[M]-0
}else{L=this.options.speed}}if(this.state===m.Deferred.states.unfired&&!this.chains.length){if(J.length===0){return this.options.speed
}this.options.speed=L}else{this.then(function(N){if(J.length===0){return K.options.speed
}K.options.speed=L;return N})}return this},async:function(L){var K=this,J=arguments;
if(this.state===m.Deferred.states.unfired&&!this.chains.length){if(J.length===0){return this.options.async
}this.options.async=!!L}else{this.then(function(M){if(J.length===0){return K.options.async
}K.options.async=!!L;return M})}return this},canceller:function(K){var J=arguments;
if(this.state===m.Deferred.states.unfired&&!this.chains.length){if(J.length===0){return this.options.cancellers
}if(!this.cancelled&&m.isFunction(K)){this.options.cancellers.push(K)}}else{this.stopper.apply(this,J)
}return this},stopper:function(L){var K=this,J=arguments;if(this.state===m.Deferred.states.unfired&&!this.chains.length){this.canceller.apply(this,J)
}else{this.then(function(M){if(J.length===0){return K.options.stoppers}if(!K.cancelled&&m.isFunction(L)){K.options.stoppers.push(L)
}return M})}return this},then:function(K,J){if(!this.chained&&!this.cancelled){this.chains.push({success:K,failure:J});
if(this.state&m.Deferred.states.fired){if(!this.freezing&&!this.tilling&&!this.waiting){C.call(this)
}}}m.Internal.referSpeeds.call(this,m.Deferred.speeds);return this},rescue:function(J){return this.then(null,J)
},ensure:function(J){return this.then(J,J)},cancel:function(){if(!this.cancelled){this.cancelled=true;
switch(this.state){case m.Deferred.states.unfired:E.call(this,"cancellers");if(this.state===m.Deferred.states.unfired){this.raise(new Error(this))
}break;case m.Deferred.states.success:E.call(this,"stoppers");if(m.isDeferred(this.results.success)){this.results.success.cancel()
}break;case m.Deferred.states.failure:E.call(this,"stoppers");break;default:break
}}return this},begin:function(K){var J=this;if(!this.cancelled&&this.state===m.Deferred.states.unfired){if(m.isDeferred(K)&&!K.cancelled){K.ensure(function(L){J.begin(L)
})}else{this.options.cancellers=[];I.call(this,K)}}m.Internal.referSpeeds.call(this,m.Deferred.speeds);
return this},raise:function(J){return this.begin(m.isError(J)?J:new Error(J))},end:function(){this.chained=true;
return this},wait:function(N,L){var M,K=this,J=arguments;M=new m.Deferred();return this.then(function(O){if(m.isError(O)){throw O
}K.waiting=true;m.Deferred.wait(N).ensure(function(P){K.waiting=false;if(m.isError(P)){M.raise(P)
}else{M.begin(J.length>=2?L:O)}});return M})},till:function(J){var K=this,L=new m.Deferred();
return this.then(function(M){if(m.isError(M)){throw M}K.tilling=true;m.Deferred.till(J,M).ensure(function(N){K.tilling=false;
if(m.isError(N)){L.raise(N)}else{L.begin(M)}});return L})}});m.Deferred.prototype.init.prototype=m.Deferred.prototype;
function F(J){if(m.isError(J)){this.state=m.Deferred.states.failure}else{this.state=m.Deferred.states.success
}return this.state}function I(J){F.call(this,J);this.results[m.Deferred.states[this.state]]=J;
if(!this.freezing&&!this.tilling&&!this.waiting){C.call(this)}}function C(J){if(J||(!this.freezing&&!this.tilling&&!this.waiting)){if(this.options&&this.options.async){A.call(this)
}else{H.call(this)}}}function A(){var J=this,K;if(this.options&&m.isNumeric(this.options.speed)){K=this.options.speed
}else{K=m.Deferred.defaults.speed}this.freezing=true;m.Internal.setTimeout(function(){try{B.call(J)
}catch(L){J.freezing=false;throw L}if(G.call(J)){m.Internal.setTimeout(function(){C.call(J,true)
},0)}else{J.freezing=false}},K)}function H(){B.call(this);if(this.options&&this.options.async){C.call(this)
}}function B(){var L=this,J,K,O,M;J=this.results[m.Deferred.states[this.state]];M=null;
while(G.call(this)){K=this.chains.shift();O=K&&K[m.Deferred.states[this.state]];if(!m.isFunction(O)){continue
}try{J=O.call(this,J);this.state=F.call({},J);if(m.isDeferred(J)){M=function(P){return D.call(L,P)
};this.nested++}}catch(N){this.state=m.Deferred.states.failure;J=N;if(!m.isError(J)){J=new Error(J)
}}if(this.options&&this.options.async){break}}this.results[m.Deferred.states[this.state]]=J;
if(M&&this.nested){J.ensure(M).end()}}function G(){return this.chains&&this.chains.length&&this.nested===0&&!this.cancelled
}function D(J){I.call(this,J);this.nested--;if(this.nested===0&&!this.cancelled&&(this.state&m.Deferred.states.fired)){C.call(this)
}}function z(K,P){var N,O,J,M,L,Q;if(K){if(K.length===1&&K[0]&&m.isObject(K[0])){N=K[0];
if(N.speed!==Q||N.canceller!==Q||N.async!==Q||N.stopper!==Q){O=N.speed;J=N.canceller;
M=N.stopper;L=N.async}else{O=N.options&&N.options.speed;J=N.options&&N.options.canceller;
M=N.options&&N.options.stopper;L=N.options&&N.options.async}}else{if(K.length===1&&K[0]&&m.isArray(K[0])){N=K[0]
}else{N=K}d(N||[],function(R){if(O===Q&&m.isNumeric(R)){O=R}else{if(O===Q&&m.isNumeric(m.Deferred.speeds[R])){O=m.Deferred.speeds[R]
}else{if(J===Q&&m.isFunction(R)){J=R}else{if(L===Q&&m.isBoolean(R)){L=R}else{if(M===Q&&J===Q&&m.isFunction(R)){M=R
}}}}}})}}this.options=this.options||{};if(!m.isArray(this.options.cancellers)){this.options.cancellers=[]
}if(!m.isArray(this.options.stoppers)){this.options.stoppers=[]}if(!m.isNumeric(O)){if(this.options.speed!==Q&&m.isNumeric(this.options.speed)){O=this.options.speed-0
}else{O=P.speed}}if(!m.isFunction(J)){J=P.canceller}if(!m.isFunction(M)){M=P.stopper
}if(!m.isBoolean(L)){if(this.options.async!==Q&&m.isBoolean(this.options.async)){L=this.options.async
}else{L=P.async}}j(this.options,{speed:O-0,async:L});if(m.isFunction(J)){this.options.cancellers.push(J)
}if(m.isFunction(M)){this.options.stoppers.push(M)}return this}function E(J){var K;
while(this.options[J]&&this.options[J].length){K=this.options[J].shift();if(m.isFunction(K)){K.call(this)
}}}j(m.Deferred,{extendSpeeds:function(P,M,J,L){var O={},K={};var N=function(Q,R){return function(){var U={},S=arguments,T=S.callee;
S=y(S);z.call(U,S,{speed:R,canceller:m.Deferred.defaults.canceller,stopper:m.Deferred.defaults.stopper,async:m.Deferred.defaults.async});
U.speedName=Q;S.unshift(U);return J.apply(T.instance,S)}};d(L,function(R,Q){K[Q]=N(Q,R)
});return j(P[M],K)}});j(m.Internal,{referSpeeds:j(function(J){var K=arguments.callee,M,L;
if(J&&this.forEach.fast.instance!==this){for(M in K.props){if(M in this&&this[M]){for(L in K.speeds){if(L in J&&L in this[M]&&this[M][L]){this[M][L].instance=this
}}}}}},{props:{forEach:true,repeat:true,forEver:true,iterate:true,map:true,filter:true,reduce:true,every:true,some:true},speeds:{limp:0,doze:1,slow:2,normal:3,fast:4,rapid:5,ninja:6}})});
m.Deferred.extendSpeeds(m,"Deferred",function(J){return m.Deferred(J)},m.Deferred.speeds)
})();(function(){j(m.Deferred,{isDeferred:m.isDeferred,succeed:function(){var z=new m.Deferred();
z.begin.apply(z,arguments);return z},failure:function(){var z=new m.Deferred();z.raise.apply(z,arguments);
return z},wait:function(B,z){var C,A=new m.Deferred({canceller:function(){try{m.Internal.clearTimeout(C)
}catch(D){}}});if(arguments.length>=2){A.then(function(){return z})}C=m.Internal.setTimeout(function(){A.begin()
},Math.floor(((B-0)||0)*1000));return A},callLater:function(A,B){var z=y(arguments,2);
return m.Deferred.wait(A).then(function(){if(m.isDeferred(B)){return B.begin.apply(B,z)
}else{if(m.isFunction(B)){return B.apply(B,z)}else{return B}}})},callLazy:function(A){var z=y(arguments,1);
return m.Deferred.wait(0).then(function(){if(m.isDeferred(A)){return A.begin.apply(A,z)
}else{if(m.isFunction(A)){return A.apply(A,z)}else{return A}}})},maybeDeferred:function(A){var z,B;
if(m.isFunction(A)){try{B=A();if(m.isDeferred(B)){z=B}else{z=m.Deferred.succeed(B)
}}catch(C){z=m.Deferred.failure(C)}}else{if(m.isDeferred(A)){z=A}else{z=m.Deferred.succeed(A)
}}return z},isFired:function(z){return m.isDeferred(z)&&((z.state&m.Deferred.states.fired)!==0)
},lastResult:function(A){var z;if(m.isDeferred(A)){try{z=A.results[m.Deferred.states[m.Deferred.states.success]]
}catch(B){}}return z},lastError:function(A){var z;if(m.isDeferred(A)){try{z=A.results[m.Deferred.states[m.Deferred.states.failure]]
}catch(B){}}return z}});j(m.Deferred,{begin:function(A){var C,D,B=y(arguments,1),z;
C=new m.Deferred({async:true,canceller:function(){try{m.Internal.clearTimeout(D)}catch(E){}}});
z=A&&m.isFunction(A);D=m.Internal.setTimeout(function(){C.begin(z?(void 0):A)},0);
if(z){C.then(function(){return A.apply(this,B)})}return C},flush:function(A){var z=y(arguments,1);
return m.Deferred.begin(function(){if(m.isDeferred(A)){return A.begin.apply(A,z)}else{if(m.isFunction(A)){return A.apply(this,z)
}else{return A}}})},till:function(B){var C=new m.Deferred(),A=y(arguments,1),z=13;
return m.Deferred.begin(function(){var E=this,D=arguments.callee,F=b();if(B&&!B.apply(this,A)){m.Internal.setTimeout(function(){D.call(E)
},z+(b()-F))}else{C.begin()}return C})},parallel:function(D){var z,B=arguments,E,C,A;
if(B.length===0){z=m.Deferred.succeed()}else{if(B.length===1){if(m.isObject(D)){C=D
}else{C=y(D)}}else{C=y(B)}z=new m.Deferred({canceller:function(){d(C,function(F){if(m.isDeferred(F)){F.cancel()
}})}});A={};E=new m.Deferred();d(C,function(F,G){var H;if(m.isDeferred(F)){H=F}else{if(m.isFunction(F)){H=new m.Deferred();
H.then(function(){var I=F();if(m.isDeferred(I)&&I.state===m.Deferred.states.unfired){I.begin()
}return I})}else{H=m.Deferred.succeed(F)}}E.then(function(){if(!m.isDeferred(H)){H=m.Deferred.maybeDeferred(H)
}if(H.state===m.Deferred.states.unfired){m.Deferred.callLazy(H)}return H}).then(function(I){A[G]=I
})});E.then(function(){z.begin(A)},function(F){z.raise(F)});m.Deferred.callLazy(E)
}return z},chain:function(){var A=arguments,z=A.length,D,B,C;B=new m.Deferred();if(z>0){D=y(z===1?A[0]:A);
C={name:/^\s*[()]*\s*function\s*([^\s()]+)/,rescue:/rescue|raise|err|fail/i};d(D,function(G){var E;
if(m.isFunction(G)){try{E=G.toString().match(C.name)[1]}catch(F){}if(E&&C.rescue.test(E)){B.rescue(G)
}else{B.then(G)}}else{if(m.isDeferred(G)){B.then(function(H){if(G.state===m.Deferred.states.unfired){G.begin(H)
}return G})}else{if(m.isObject(G)||m.isArray(G)){B.then(function(){return m.Deferred.parallel(G)
})}else{if(m.isError(G)){B.then(function(){throw G})}else{B.then(function(){return G
})}}}}})}m.Deferred.callLazy(B);return B}});m.Deferred.extendSpeeds(m.Deferred,"begin",function(C,A){var D,F,B=y(arguments,2),z,E;
z=m.isFunction(A);E=C.options||C||{};if(!E.cancellers){E.cancellers=[]}E.cancellers.push(function(){try{m.Internal.clearTimeout(F)
}catch(G){}});D=new m.Deferred(C);F=m.Internal.setTimeout(function(){D.begin(z?g:A)
},C.options&&C.options.speed||C.speed);if(z){D.then(function(){return A.apply(this,B)
})}return D},m.Deferred.speeds);m.Deferred.extendSpeeds(m.Deferred,"flush",function(B,E){var C,A,D,z=y(arguments,2);
C=B.options?B.options.speed:B.speed;if(C in m.Deferred.speeds&&m.isString(m.Deferred.speeds[C])){A=m.Deferred.speeds[C]
}else{d(m.Deferred.speeds,function(G,F){if(G==C){A=F;throw m.StopIteration}})}if(A&&A in m.Deferred.begin){D=m.Deferred.begin[A]
}else{D=m.Deferred.begin}return D(function(){if(m.isDeferred(E)){return E.begin.apply(E,z)
}else{if(m.isFunction(E)){return E.apply(this,z)}else{return E}}})},m.Deferred.speeds)
})();j(m.Internal,{LightIterator:j(function(A,B,z){return new m.Internal.LightIterator.prototype.doit(A,B,z)
},{speeds:{limp:-1,doze:0,slow:2,normal:5,fast:12,rapid:36,ninja:60},delays:{limp:1000,doze:100,slow:13,normal:0,fast:0,rapid:0,ninja:0},types:{forLoop:1,forInLoop:2,repeat:4,forEver:8,iterate:16}})});
j(m.Internal.LightIterator,{defaults:{speed:m.Internal.LightIterator.speeds.normal},revSpeeds:{}});
d(m.Internal.LightIterator.speeds,function(A,z){m.Internal.LightIterator.revSpeeds[A]=z
});m.Internal.LightIterator.prototype=j(m.Internal.LightIterator.prototype,{constructor:m.Internal.LightIterator,interval:m.Internal.LightIterator.defaults.speed,iter:null,result:null,deferred:null,revDeferred:null,time:{},waiting:false,restable:false,async:false,options:null,doit:function(A,B,z){this.setOptions(z);
this.execute(A,B);this.watch();return this},setOptions:function(z){this.options=z||{};
this.setInterval();this.setAsync()},setInterval:function(){var z=null;if(m.isNumeric(this.options.interval)){z=this.options.interval-0
}else{if(this.options.interval in m.Internal.LightIterator.speeds){z=m.Internal.LightIterator.speeds[this.options.interval]-0
}}if(z!==null&&!isNaN(z)){this.interval=z}if(!m.isNumeric(this.interval)){this.interval=m.Internal.LightIterator.defaults.speed
}},setAsync:function(){var z=null;if(this.options.async!==g){z=!!this.options.async
}if(z!==null){this.async=!!z}if(!m.isBoolean(this.async)){this.async=!!this.async
}},createDeferred:function(){return new m.Deferred({async:false})},watch:function(){var z=this;
if(!this.async&&this.waiting===true){if(this.isWaitable()){m.XPCOM.till(function(){return z.waiting!==true
})}else{throw new Error("Failed to synchronize loop")}}},execute:function(z,C){var B,A=this;
this.waiting=true;if(!z){this.result={};this.waiting=false}else{this.waiting=true;
this.restable=true;this.time={total:null,loop:null,count:1,rest:100,limit:255};this.setIter(z,C);
if(!this.async&&!this.isWaitable()){this.revback();this.waiting=false}else{B=this.createDeferred();
B.then(function(){var E,D;E=A.createDeferred();D=A.createDeferred();E.then(function(){return A.revolve().then(function(){D.begin()
})}).begin();return D}).ensure(function(){A.waiting=false});if(this.async){this.deferred=B.then(function(){return A.result
})}this.flush(B)}}},setIter:function(z,D){var C,B,A;C=this.options.type;B=m.Internal.LightIterator.types;
A=this.options.context;if((C&B.iterate)===B.iterate){this.result=null;this.iter=this.iterate(z,D,A)
}else{if((C&B.forEver)===B.forEver){this.result={};this.iter=this.forEver(z,A)}else{if((C&B.repeat)===B.repeat){this.result={};
this.iter=this.repeat(z,D,A)}else{if(m.isArrayLike(z)){this.result=z;this.iter=this.forLoop(z,D,A)
}else{this.result=z;this.iter=this.forInLoop(z,D,A)}}}}},revback:function(){var A,z=false,D,B;
this.time.loop=b();REVOLVE:{do{try{this.iter.next()}catch(C){A=C;if(m.isStopIter(A)){break REVOLVE
}throw A}if(this.isWaitable()){if(this.time.total===null){this.time.total=b()}else{if(b()-this.time.total>=this.time.rest){m.XPCOM.till(0);
this.time.total=b()}}}else{if(!this.async){if(this.restable&&this.time.count>=this.time.limit){this.restable=false
}}}D=b()-this.time.loop;if(D>=this.interval){if(this.async&&this.interval<m.Internal.LightIterator.speeds.normal){z=true
}else{if(this.async||this.restable||this.isWaitable()){if(D<this.interval+8){B=2}else{if(D<this.interval+36){B=5
}else{B=7}}z=(Math.random()*10<B)}}}}while(!z);if(this.time.count<=this.time.limit){this.time.count++
}return this.flush(this.revback,true)}if(m.isDeferred(this.revDeferred)){this.revDeferred.begin()
}},revolve:function(){var z=this,A,B;A=this.createDeferred();B=this.createDeferred();
A.then(function(){var C=z.createDeferred();C.then(function(){z.revDeferred=z.createDeferred();
z.revback()}).begin();return z.revDeferred}).ensure(function(C){B.begin();if(m.isError(C)){throw C
}});this.flush(A);return B},flush:function(F,C){var A=this,E,z=false,B,D;if(this.async||this.isWaitable()){z=true
}if(!z&&m.isFunction(F)){return F.call(this)}else{E=this.createDeferred();E.then(function(){if(m.isDeferred(F)){F.begin()
}else{F.apply(A)}});if(z){B=0;if(C){D=m.Internal.LightIterator.revSpeeds[this.interval];
if(D&&m.isNumeric(m.Internal.LightIterator.delays[D])){B=m.Internal.LightIterator.delays[D]
}}if(B===0){m.Deferred.callLazy(E)}else{m.Deferred.callLater(B/1000,E)}}else{E.begin()
}return E}},isWaitable:function(){return !!(m.System.isWaitable&&m.XPCOM&&m.XPCOM.isEnabled)
},noop:function(){return{next:function(){throw m.StopIteration}}},forEver:function(B,A){var z=0;
if(!m.isFunction(B)){return this.noop}return{next:function(){var C=B.call(A,z);try{if(!isFinite(++z)||z>=Number.MAX_VALUE){throw 0
}}catch(D){z=0}}}},repeat:function(z,F,C){var B,A,E,D;if(!m.isFunction(F)){return this.noop
}if(!z||z==null){E=0}else{if(m.isNumeric(z)){E=z-0}else{E=z||{};if(m.isNumeric(E.start)){E.begin=E.start
}if(m.isNumeric(E.stop)){E.end=E.stop}}}A={begin:m.isNumeric(E.begin)?E.begin-0:0,end:m.isNumeric(E.end)?E.end-0:(E||0)-0,step:m.isNumeric(E.step)?E.step-0:1,last:false,prev:null};
B=A.step?A.begin:A.end;D=A.end-A.step;return{next:function(){var G;if(B<A.end){A.last=(B>=D);
G=F.call(C,B,A.last,A);A.prev=G}else{throw m.StopIteration}B+=A.step}}},forLoop:function(z,D,B){var C,A=0;
if(!z||!z.length||!m.isFunction(D)){return this.noop}C=y(z);return{next:function(){var G,E;
while(true){if(A>=C.length){throw m.StopIteration}if(!(A in C)){A++;continue}try{G=C[A]
}catch(F){A++;continue}E=D.call(B,G,A,z);A++;break}}}},forInLoop:function(C,H,B){var z,D=0,A,G,E;
if(m.isFunction(H)){z=[];for(A in C){try{G=C[A]}catch(F){continue}z[z.length]=[G,A]
}}if(!z||!z.length){return this.noop}return{next:function(){var I,M,J,L;while(true){if(D>=z.length){throw m.StopIteration
}if(!(D in z)){D++;continue}try{M=z[D];L=M[0];J=M[1]}catch(K){D++;continue}I=H.call(B,L,J,C);
D++;break}}}},iterate:function(z,D,A){var B=this,C;C=m.Iter.toIter(z);if(!m.isIter(C)){return this.noop
}if(m.isFunction(D)){return{next:function(){var E=C.next();E.push(z);B.result=D.apply(A,E)
}}}else{return{next:function(){B.result=C.next()}}}}});m.Internal.LightIterator.prototype.doit.prototype=m.Internal.LightIterator.prototype;
j(m.tmp,{createLightIterateConstructor:function(D){var A,z,B;var C=function(F){var E;
if(m.Internal.LightIterator.speeds[F]===g){E=m.Internal.LightIterator.defaults.speed
}else{E=m.Internal.LightIterator.speeds[F]}return D(E)};z=C();A={};for(B in m.Internal.LightIterator.speeds){A[B]=C(B)
}return j(z,A)}});m.update({forEach:m.tmp.createLightIterateConstructor(function(z){return function(A,D,B){var C={};
C.type=m.Internal.LightIterator.types.forLoop|m.Internal.LightIterator.types.forInLoop;
C.interval=z;C.async=false;C.context=B;return(new m.Internal.LightIterator(A,D,C)).result
}}),repeat:m.tmp.createLightIterateConstructor(function(z){return function(A,D,B){var C={};
C.type=m.Internal.LightIterator.types.repeat;C.interval=z;C.async=false;C.context=B;
return(new m.Internal.LightIterator(A,D,C)).result}}),forEver:m.tmp.createLightIterateConstructor(function(z){return function(C,A){var B={};
B.type=m.Internal.LightIterator.types.forEver;B.interval=z;B.async=false;B.context=A;
return(new m.Internal.LightIterator(C,null,B)).result}}),iterate:m.tmp.createLightIterateConstructor(function(z){return function(A,D,B){var C={};
C.type=m.Internal.LightIterator.types.iterate;C.interval=z;C.async=false;C.context=B;
return(new m.Internal.LightIterator(A,D,C)).result}})});j(m.Deferred,{forEach:m.tmp.createLightIterateConstructor(function(z){return function(A,D,B){var C={};
C.type=m.Internal.LightIterator.types.forLoop|m.Internal.LightIterator.types.forInLoop;
C.interval=z;C.async=true;C.context=B;return(new m.Internal.LightIterator(A,D,C)).deferred
}}),repeat:m.tmp.createLightIterateConstructor(function(z){return function(A,D,B){var C={};
C.type=m.Internal.LightIterator.types.repeat;C.interval=z;C.async=true;C.context=B;
return(new m.Internal.LightIterator(A,D,C)).deferred}}),forEver:m.tmp.createLightIterateConstructor(function(z){return function(C,A){var B={};
B.type=m.Internal.LightIterator.types.forEver;B.interval=z;B.async=true;B.context=A;
return(new m.Internal.LightIterator(C,null,B)).deferred}}),iterate:m.tmp.createLightIterateConstructor(function(z){return function(A,D,B){var C={};
C.type=m.Internal.LightIterator.types.iterate;C.interval=z;C.async=true;C.context=B;
return(new m.Internal.LightIterator(A,D,C)).deferred}})});delete m.tmp.createLightIterateConstructor;
m.update({Iter:function(){return m.isIter(this)?this.init(arguments):new m.Iter.fn.init(arguments)
}});m.Iter.fn=m.Iter.prototype=j(m.Iter.prototype,{constructor:m.Iter,id:m.Internal.getMagicNumber(),serial:null,NAME:"Iter",toString:m.toString,isIter:m.isIter,init:function(z){if(!this.serial){this.serial=k(this)
}return this},next:function(){throw m.StopIteration}});m.Iter.prototype.init.prototype=m.Iter.prototype;
j(m.Iter,{StopIteration:m.StopIteration,toIter:function(A){var B,G,F,D,z,C;if(m.isIter(A)){return A
}z=A&&m.isArrayLike(A);C=A&&!z&&m.isObject(A);if(C){G=[];for(F in A){try{D=A[F]}catch(E){continue
}G[G.length]=[D,F]}}else{G=y(A)}B=new m.Iter();B.next=(function(){var H=0;if(C){return function(){var I,L,K;
while(true){if(H>=G.length){throw m.StopIteration}if(!(H in G)){H++;continue}try{I=G[H][1];
L=G[H][0]}catch(J){H++;continue}K=[L,I];H++;return K}}}else{return function(){var J,I;
while(true){if(H>=G.length){throw m.StopIteration}if(!(H in G)){H++;continue}try{J=G[H]
}catch(K){H++;continue}I=[J,H];H++;return I}}}})();return B},forEach:function(){return m.iterate.apply(null,arguments)
},map:function(B,F,z){var G,H,D,E,C,A;E=this&&this.iterateSpeed;H=B&&m.isArrayLike(B);
D=B&&!H&&m.isObject(B);if(H){G=[]}else{if(D){G={}}else{G=null}}A=E||this&&this.iterateSpeedSync||m.iterate;
C=function(){return A(B,function(L,J,K){var I=F.call(z,L,J,K);if(H){G[G.length]=I
}else{if(D){G[J]=I}else{G=I}}},z)};if(E){return C().then(function(){return G})}else{C();
return G}},filter:function(B,F,z){var G,H,D,E,C,A;E=this&&this.iterateSpeed;H=B&&m.isArrayLike(B);
D=B&&!H&&m.isObject(B);if(H){G=[]}else{if(D){G={}}else{G=null}}A=E||this&&this.iterateSpeedSync||m.iterate;
C=function(){return A(B,function(K,I,J){if(F.call(z,K,I,J)){if(H){G[G.length]=K}else{if(D){G[I]=K
}else{G=K}}}},z)};if(E){return C().then(function(){return G})}else{C();return G}},reduce:function(B,I,E,z){var J,D,G,H,F,C,A;
F=this&&this.iterateSpeed;J=B&&m.isArrayLike(B);D=B&&!J&&m.isObject(B);if(E===g){G=m.Struct.first(B)
}else{G=E}H=true;A=F||this&&this.iterateSpeedSync||m.iterate;C=function(){return A(B,function(M,K,L){if(H){H=false
}else{G=I.call(z,G,M,K,L)}},z)};if(F){return C().then(function(){return G})}else{C();
return G}},every:function(A,F,B){var z=true,E,C,D;E=this&&this.iterateSpeed;D=E||this&&this.iterateSpeedSync||m.iterate;
C=function(){return D(A,function(I,G,H){if(!F.call(B,I,G,H)){z=false;throw m.StopIteration
}},B)};if(E){return C().then(function(){return z})}else{C();return z}},some:function(A,F,B){var z=false,E,C,D;
E=this&&this.iterateSpeed;D=E||this&&this.iterateSpeedSync||m.iterate;C=function(){return D(A,function(I,G,H){if(F.call(B,I,G,H)){z=true;
throw m.StopIteration}},B)};if(E){return C().then(function(){return z})}else{C();
return z}},range:function(){var E=arguments,G,H;var B,C,A,z,D,F;H=[];B=0;C=0;A=1;
switch(E.length){case 0:return(void 0);case 1:G=E[0];if(m.isObject(G)){if("begin" in G){B=G.begin
}else{if("start" in G){B=G.start}}if("end" in G){C=G.end}else{if("stop" in G){C=G.stop
}}if("step" in G){A=G.step}}else{C=G}break;case 2:B=E[0];C=E[1];break;case 3:default:B=E[0];
C=E[1];A=E[2];break}if(m.isString(B)&&B.length===1&&m.isString(C)&&C.length===1){B=B.charCodeAt(0)||0;
C=C.charCodeAt(0)||0;D=true}else{B=B-0;C=C-0;D=false}A=A-0;if(isNaN(B)||isNaN(C)||isNaN(A)||A==0){return H
}if((A>0&&B>C)||(A<0&&B<C)){z=B;B=C;C=z}F=new m.Iter();F.next=function(){if((A>0&&B>C)||(A<0&&B<C)){throw m.StopIteration
}H[H.length]=D?String.fromCharCode(B):B;B+=A};m.iterate(F);return H},indexOf:function(B,I,J){var M=-1,N,E;
var D,F,L,z,H,K,C;H=arguments;K=H.length;N=B&&m.isArrayLike(B);E=B&&!N&&m.isObject(B);
if(N){try{if(m.System.isBuiltinArrayIndexOf){D=Array.prototype.indexOf.apply(B,y(H,1));
if(m.isNumeric(D)){M=D}else{throw D}}else{throw D}}catch(A){F=(B&&B.length)||0;D=Number(J)||0;
D=(D<0)?Math.ceil(D):Math.floor(D);if(D<0){D+=F}for(;D<F;D++){try{if(D in B){z=B[D];
if(z===I){M=D;break}}}catch(G){continue}}}}else{if(E){C=false;for(L in B){try{if(!C&&K>=3&&J!==L){continue
}else{C=true}z=B[L];if(z===I){M=L}}catch(G){continue}}}else{if(B!=null){try{z=(B.toString&&B.toString())||String(B);
M=String.prototype.indexOf.apply(z,y(H,1))}catch(G){M=-1}}else{M=-1}}}return M},lastIndexOf:function(C,J,K){var N=-1,O,F;
var E,G,M,A,I,L,D,z;I=arguments;L=I.length;O=C&&m.isArrayLike(C);F=C&&!O&&m.isObject(C);
if(O){try{if(m.System.isBuiltinArrayLastIndexOf){E=Array.prototype.lastIndexOf.apply(C,y(I,1));
if(m.isNumeric(E)){N=E}else{throw E}}else{throw E}}catch(B){G=(C&&C.length)||0;E=Number(K);
if(isNaN(E)){E=G-1}else{E=(E<0)?Math.ceil(E):Math.floor(E);if(E<0){E+=G}else{if(E>=G){E=G-1
}}}for(;E>-1;E--){try{if(E in C){A=C[E];if(A===J){N=E;break}}}catch(H){continue}}}}else{if(F){z=[];
D=false;for(M in C){try{A=C[M]}catch(H){continue}z[z.length]=[M,A];if(A===J){N=M}if(M===K){D=true;
break}}if(D){N=-1;G=z.length;while(--G>=0){M=z[G][0];A=z[G][1];if(A===J){N=M;break
}}}}else{if(C!=null){try{A=(C.toString&&C.toString())||String(C);N=String.prototype.lastIndexOf.apply(A,y(I,1))
}catch(H){N=-1}}else{N=-1}}}return N}});j(m.tmp,{createIterators:function(z){d(z,function(A){var B={};
B[A.NAME]=function(){var D={},C=y(arguments);D.iterateSpeed=(this&&this.iterateSpeed)||m.Deferred.iterate;
return m.Deferred.begin(function(){var E=new m.Deferred();A.method.apply(D,C).then(function(F){E.begin(F)
},function(F){E.raise(F)});return E})};j(m.Deferred,B);m.Deferred.extendSpeeds(m.Deferred,A.NAME,function(E){var D={},C=y(arguments,1);
D.iterateSpeed=m.Deferred.iterate[E.speedName];return m.Deferred.begin(function(){var F=new m.Deferred();
A.method.apply(D,C).then(function(G){F.begin(G)},function(G){F.raise(G)});return F
})},m.Internal.LightIterator.speeds)})},createProtoIterators:function(z){d(z,function(A){var C={},B={};
C[A.NAME]=function(){var E=y(arguments),D=j({},this.options);return this.then(function(F){var G=new m.Deferred();
E=A.args(F,E);A.method.apply(A.context,E).ensure(function(H){a(G,D);if(m.isError(H)){G.raise(H)
}else{G.begin(H)}});return G})};j(m.Deferred.fn,C);if(A.speed){if(A.iterable){B.methods=function(D){return{iter:A.iterable[D],context:A.context}
}}else{B.methods=function(D){return{iter:A.method,context:{iterateSpeed:A.context.iterateSpeed[D]}}
}}m.Deferred.extendSpeeds(m.Deferred.fn,A.NAME,function(G){var F=this,H,E,D=y(arguments,1);
H=B.methods(G.speedName);E=j({},this.options);return this.then(function(I){var J=new m.Deferred();
D=A.args(I,D);H.iter.apply(H.context,D).ensure(function(K){a(J,E);if(m.isError(K)){J.raise(K)
}else{J.begin(K)}});return J})},m.Internal.LightIterator.speeds)}})},createSyncIterator:function(C){var A,z;
var B=function(E){var D=E;if(!D){d(m.Internal.LightIterator.speeds,function(G,F){if(G===m.Internal.LightIterator.defaults.speed){D=F;
throw m.StopIteration}})}return C(D)};z=B();A={};d(m.Internal.LightIterator.speeds,function(E,D){A[D]=B(D)
});return j(z,A)}});m.tmp.createIterators([{NAME:"map",method:m.Iter.map},{NAME:"filter",method:m.Iter.filter},{NAME:"reduce",method:m.Iter.reduce},{NAME:"every",method:m.Iter.every},{NAME:"some",method:m.Iter.some}]);
m.tmp.createProtoIterators([{NAME:"forEach",method:m.Deferred.forEach,context:null,speed:true,iterable:m.Deferred.forEach,args:function(z,A){return[z].concat(A)
}},{NAME:"repeat",method:m.Deferred.repeat,context:null,speed:true,iterable:m.Deferred.repeat,args:function(z,A){if(z&&m.isNumber(z.length)){return[z.length].concat(A)
}if(z&&m.isObject(z)&&("end" in z||"begin" in z||"step" in z||"stop" in z||"start" in z)){return[z].concat(A)
}return A}},{NAME:"forEver",method:m.Deferred.forEver,context:null,speed:true,iterable:m.Deferred.forEver,args:function(z,A){return A
}},{NAME:"iterate",method:m.Deferred.iterate,context:null,speed:true,iterable:m.Deferred.iterate,args:function(z,A){return[z].concat(A)
}},{NAME:"map",method:m.Iter.map,context:{iterateSpeed:m.Deferred.iterate},speed:true,iterable:null,args:function(z,A){return[z].concat(A)
}},{NAME:"filter",method:m.Iter.filter,context:{iterateSpeed:m.Deferred.iterate},speed:true,iterable:null,args:function(z,A){return[z].concat(A)
}},{NAME:"reduce",method:m.Iter.reduce,context:{iterateSpeed:m.Deferred.iterate},speed:true,iterable:null,args:function(z,A){return[z].concat(A)
}},{NAME:"every",method:m.Iter.every,context:{iterateSpeed:m.Deferred.iterate},speed:true,iterable:null,args:function(z,A){return[z].concat(A)
}},{NAME:"some",method:m.Iter.some,context:{iterateSpeed:m.Deferred.iterate},speed:true,iterable:null,args:function(z,A){return[z].concat(A)
}}]);m.update({map:m.tmp.createSyncIterator(function(z){return function(){var A={iterateSpeedSync:m.iterate[z]};
return m.Iter.map.apply(A,arguments)}}),filter:m.tmp.createSyncIterator(function(z){return function(){var A={iterateSpeedSync:m.iterate[z]};
return m.Iter.filter.apply(A,arguments)}}),reduce:m.tmp.createSyncIterator(function(z){return function(){var A={iterateSpeedSync:m.iterate[z]};
return m.Iter.reduce.apply(A,arguments)}}),every:m.tmp.createSyncIterator(function(z){return function(){var A={iterateSpeedSync:m.iterate[z]};
return m.Iter.every.apply(A,arguments)}}),some:m.tmp.createSyncIterator(function(z){return function(){var A={iterateSpeedSync:m.iterate[z]};
return m.Iter.some.apply(A,arguments)}}),range:function(){return m.Iter.range.apply(null,arguments)
},indexOf:function(){return m.Iter.indexOf.apply(null,arguments)},lastIndexOf:function(){return m.Iter.lastIndexOf.apply(null,arguments)
}});delete m.tmp.createIterators;delete m.tmp.createProtoIterators;delete m.tmp.createSyncIterator;
m.update({Crypt:{}});j(m.Crypt,{hashCode:function(C){var B=0,E,D,A,z;z=4294967296;
if(C==null){E=String(C)}else{E=C.toString?C.toString():String(C)}A=E.length;for(D=0;
D<A;++D){B=31*B+E.charCodeAt(D);B%=z}return B}});m.update({XPCOM:{}});j(m.XPCOM,{isEnabled:(function(){var A=false,z;
try{if(typeof window==="object"&&window.location&&/^(?:chrome|resource):$/.test(window.location.protocol)){try{t=Components.classes;
o=Components.interfaces;i=Components.results;h=Components.utils;A=true}catch(C){o=t=i=h=null;
A=false}}}catch(B){A=false}if(A){m.System.isWaitable=true}return A})(),evalInSandbox:function(D,A){var z,B,E,C;
if(m.XPCOM.isEnabled){if(!h){m.System.isWaitable=m.XPCOM.isEnabled=false;return}B=/^[\s;]*|[\s;]*$/g;
E=["(",")"].join(s(D).replace(B,""));C=A||"http://www.example.com/";z=h.evalInSandbox(E,h.Sandbox(C))
}return z},till:function(A){var z;if(m.XPCOM.isEnabled){try{z=t["@mozilla.org/thread-manager;1"].getService(o.nsIThreadManager).mainThread
}catch(B){m.System.isWaitable=m.XPCOM.isEnabled=false}if(z&&m.XPCOM.isEnabled){do{z.processNextEvent(true)
}while(A&&!A())}}},getMostRecentWindow:function(){var A;if(m.XPCOM.isEnabled){try{A=t["@mozilla.org/appshell/window-mediator;1"].getService(o.nsIWindowMediator).getMostRecentWindow("navigator:browser")
}catch(z){m.System.isWaitable=m.XPCOM.isEnabled=false}}return A},getChromeWindow:function(B){var A,D,E,z;
if(!m.XPCOM.isEnabled){return}z=B||"chrome://browser/content/browser.xul";try{E=t["@mozilla.org/appshell/window-mediator;1"].getService(o.nsIWindowMediator).getXULWindowEnumerator(null)
}catch(C){m.System.isWaitable=m.XPCOM.isEnabled=false;return}while(E.hasMoreElements()){try{D=E.getNext().QueryInterface(o.nsIXULWindow).docShell.QueryInterface(o.nsIInterfaceRequestor).getInterface(o.nsIDOMWindow);
if(D&&D.location&&(D.location.href==z||D.location==z)){A=D;break}}catch(C){}}return A
}});m.update({globalize:function(F,C){var A=false,E=y(arguments);var B,G,z,D=[];z=E.length;
if(z<=1&&this===m&&!m.isObject(F)){B=this;if(z>=1&&m.isBoolean(F)){C=F}else{C=!!F
}}else{if(F&&(m.isObject(F)||m.isFunction(F)||m.isArray(F))){B=F}}G=m.Internal.getExportObject();
if(B&&G){if(B===m){if(m.Internal.exportPot&&m.Internal.PotExportProps){A=m.Internal.exportPot(C)
}}else{d(B,function(I,H){if(C&&H in G){D[D.length]=H}else{G[H]=I}});A=D}}return A
}});j(m.Internal,{exportPot:function(z){var B,A=[];B=m.Internal.getExportObject();
if(B){d(m.Internal.PotExportProps,function(D,C){if(z&&C in B){A[A.length]=C}else{B[C]=D
}})}return A},PotExportProps:{Pot:m,update:j,isBoolean:m.isBoolean,isNumber:m.isNumber,isString:m.isString,isFunction:m.isFunction,isArray:m.isArray,isDate:m.isDate,isRegExp:m.isRegExp,isObject:m.isObject,isError:m.isError,typeOf:m.typeOf,typeLikeOf:m.typeLikeOf,StopIteration:m.StopIteration,isStopIter:m.isStopIter,isArrayLike:m.isArrayLike,isDeferred:m.isDeferred,isIter:m.isIter,isNumeric:m.isNumeric,isInt:m.isInt,isNativeCode:m.isNativeCode,isBuiltinMethod:m.isBuiltinMethod,isWindow:m.isWindow,isDocument:m.isDocument,isElement:m.isElement,isNodeLike:m.isNodeLike,isNodeList:m.isNodeList,Deferred:m.Deferred,succeed:m.Deferred.succeed,failure:m.Deferred.failure,wait:m.Deferred.wait,callLater:m.Deferred.callLater,callLazy:m.Deferred.callLazy,maybeDeferred:m.Deferred.maybeDeferred,isFired:m.Deferred.isFired,lastResult:m.Deferred.lastResult,lastError:m.Deferred.lastError,begin:m.Deferred.begin,flush:m.Deferred.flush,till:m.Deferred.till,parallel:m.Deferred.parallel,chain:m.Deferred.chain,forEach:m.forEach,repeat:m.repeat,forEver:m.forEver,iterate:m.iterate,Iter:m.Iter,toIter:m.Iter.toIter,map:m.map,filter:m.filter,reduce:m.reduce,every:m.every,some:m.some,range:m.range,indexOf:m.indexOf,lastIndexOf:m.lastIndexOf,rescape:w,arrayize:y,stringify:s,trim:v,now:b,hashCode:m.Crypt.hashCode,globalize:m.globalize,debug:p}});
j(c||m.Global||{},{Pot:m})})(this||{});
