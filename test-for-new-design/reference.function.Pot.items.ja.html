<!DOCTYPE html>
<html dir="ltr">
<head>
<meta charset="UTF-8">
<title>Pot.items</title>
<link rel="Pot.js Repository - GitHub" href="http://github.com/polygonplanet/Pot.js">
<link rel="author" title="polygon planet" href="http://polygonpla.net/">
<script type="text/javascript">
location.href = './#reference.function.Pot.items';
</script>
</head>
<body>
<h1>Pot.items</h1>
<div class="pot-js-document-reference-content-container">
<!--#Pot.js-reference-content:{{{-->

<dl>
  <dt>
    <div>
      <em>{Array}</em>
      <dfn id="definition.reference.function.Pot.items"><em>Pot.</em>items</dfn>
      (<em>{Object|Array}</em> object [, <em>{Function}</em> callback [, <em>{Object|*}</em> context]])
    </div>
    <div>
      <em>{Pot.Deferred}</em>
      <dfn id="definition.reference.function.Pot.Deferred.items"><em>Pot.</em>Deferred.items</dfn>
      (<em>{Object|Array}</em> object [, <em>{Function}</em> callback [, <em>{Object|*}</em> context]])
    </div>
    <div>
      <em>{Pot.Deferred}</em>
      <dfn id="definition.reference.function.Pot.Deferred.prototype.items"><em>Pot.Deferred.prototype.</em>items</dfn>
      ([<em>{Function}</em> callback [, <em>{Object|*}</em> context]])
    </div>
  </dt>
  <dd>
    <p class="potjs-reference-compatibility">
      Pot.js と PotLite.js で利用可能。
    </p>
    <p class="potjs-reference-description">
      引数 object を 2 つのアイテムからなる配列をもつ配列 (items 形式) に変換して返します。
    </p>
    <div>
      <p>
 オブジェクト object を 2 つのアイテムからなる配列をもつ配列 (items 形式) にして返します。
 <br>
 引数 object は、オブジェクトまたは配列を指定します。
 <br>
 引数 callback は、任意にイテレートする関数を指定します。
 <br>
 引数 context が指定されると、callback 関数の this が context にとって代わります。
</p>

<pre>var obj = {
      foo : 1,
      bar : 2,
      baz : 3
};
debug(items(obj));
// [
//   ['foo', 1],
//   ['bar', 2],
//   ['baz', 3]
// ]</pre>

<p>
 このように変換されます。
 <br>
 このリファレンスでは、上の例の結果のような 2 つのアイテムを持つ 2 次元配列を
 「items 形式」としています。
</p>

<p>
 コールバック関数 callback の引数は以下のようになります。
</p>
<pre>function (item, object) { this === context }

    item   : <em class="var-type">{Array}</em>      [key, value] とするアイテムの配列。index 0 -&gt; key.
    object : <em class="var-type">{Object|*}</em>   object 自身。

</pre>
<p>
 コールバックを使用する時、例えば 以下のように key, value が得られます。
</p>
<pre>var keys = [];
var values = [];

Pot.items({a: 1, b: 2, c: 3}, function(item, object) {
    keys.push(item[0]);
    values.push(item[1]);
});
Pot.debug(keys);   // ['a', 'b', 'c']
Pot.debug(values); // [1, 2, 3]</pre>

<p>
 処理は 同期処理、非同期処理、それぞれ異なります。
</p>
<div>
  <ul class="potjs-reference-broad-list">
    <li>
      <strong>Pot.items</strong> は同期処理になります。
      <br>
      <a href="#reference.function.Pot.globalize">Pot.globalize()</a> 適応済みの場合は items() で実行できます。
    </li>
    <li>
      <strong>Pot.Deferred.items</strong> は非同期処理になり、<a href="#reference.function.Pot.Deferred">Pot.Deferred</a> のインスタンスを返します。
      <br>
      <a href="#reference.function.Pot.globalize">Pot.globalize()</a> 適応済みの場合は Deferred.items() で実行できます。
    </li>
    <li>
      <strong>Pot.Deferred.prototype.items</strong> は、<a href="#reference.function.Pot.Deferred.prototype.async">Pot.Deferred.prototype.async()</a> によって 同期/非同期 が変化します。
      <br>
      <a href="#reference.function.Pot.Deferred">Pot.Deferred</a> チェイン上で実行でき、Pot.Deferred のインスタンスを返します。
    </li>
  </ul>
</div>
<p>
 callback 関数の中で
 <a href="#reference.property.Pot.StopIteration">StopIteration (Pot.StopIteration)</a> を throw することでループを止められます。
</p>
<p>
 <code>Pot.Deferred.items.<strong>slow</strong>()</code> のようにして速度の指定ができます。
 <br>
 非同期では、ほとんどの環境で速度指定が可能ですが、
 同期での速度指定は一部の環境 (XUL 上など) のみになります。
 <br>
 指定できる名前は以下の表を参照ください。
 <br>
 デフォルトの速度は normal です。
</p>
<div>
  <table class="grid">
    <tr>
      <td class="marker row-head"><strong>値 / メソッド名</strong></td>
      <td class="marker row-head"><strong>速度</strong></td>
    </tr>
    <tr>
      <td>limp</td>
      <td>最も遅い</td>
    </tr>
    <tr>
      <td>doze</td>
      <td>遅い</td>
    </tr>
    <tr>
      <td>slow</td>
      <td>遅め</td>
    </tr>
    <tr>
      <td>normal</td>
      <td>通常</td>
    </tr>
    <tr>
      <td>fast</td>
      <td>速め</td>
    </tr>
    <tr>
      <td>rapid</td>
      <td>速い</td>
    </tr>
    <tr>
      <td>ninja</td>
      <td>最も速い</td>
    </tr>
  </table>
</div>
<p>
 引数 object の 2 つのアイテムからなる配列をもつ配列 (items 形式) が返ります。
</p>
<p>
 Pot.items で同期処理の例:
</p>
<pre>// オブジェクトへの例

var obj = {foo: 1, bar: 2, baz: 3};
debug(Pot.items(obj)); // [['foo', 1], ['bar', 2], ['baz', 3]]</pre>

<pre>// 配列への例

var array = ['foo', 'bar', 'baz'];
debug(Pot.items(array)); // [[0, 'foo'], [1, 'bar'], [2, 'baz']]</pre>

<pre>// コールバック関数を使った例 (配列)

var arr = ['foo', 'bar', 'baz'];

var result = Pot.items(arr, function(item, array) {
  return '(' + item[0] + ')' + item[1];
});
debug(result); // ['(0)foo', '(1)bar', '(2)baz']</pre>

<pre>// コールバック関数を使った例 (オブジェクト)

var obj = {foo: 1, bar: 2, baz: 3};

var result = Pot.items(obj, function(item) {
  return [item[0] + '::' + item[1]];
});
debug(result); // [['foo::1'], ['bar::2'], ['baz::3']]</pre>

<p>
 Pot.Deferred.items で非同期処理の例:
</p>
<pre>// オブジェクトへの例

var obj = {foo: 1, bar: 2, baz: 3};

Pot.Deferred.items(obj).then(function(result) {
    debug(result); // [['foo', 1], ['bar', 2], ['baz', 3]]
});</pre>

<pre>// 配列への例

var array = ['foo', 'bar', 'baz'];

Pot.Deferred.items(array).then(function(result) {
    debug(result); // [[0, 'foo'], [1, 'bar'], [2, 'baz']]
});</pre>

<pre>// コールバック関数を使った例 (配列)

var arr = ['foo', 'bar', 'baz'];

Pot.Deferred.items(arr, function(item, array) {
    return '(' + item[0] + ')' + item[1];
}).then(function(result) {
    debug(result); // ['(0)foo', '(1)bar', '(2)baz']
});</pre>

<pre>// コールバック関数を使った例 (オブジェクト)

var obj = {foo: 1, bar: 2, baz: 3};

Pot.Deferred.items(obj, function(item) {
    return [item[0] + '::' + item[1]];
}).then(function(result) {
    debug(result); // [['foo::1'], ['bar::2'], ['baz::3']]
});</pre>

<p>
 Pot.Deferred.prototype.items で非同期処理の例:
</p>
<pre>// オブジェクトへの例

var obj = {foo: 1, bar: 2, baz: 3};

var d = new Pot.Deferred();

d.then(function() {
    return obj;
}).items().then(function(result) {
    debug(result); // [['foo', 1], ['bar', 2], ['baz', 3]]
}).begin();</pre>

<pre>// 配列への例

var array = ['foo', 'bar', 'baz'];

var d = new Pot.Deferred();

d.items().then(function(result) {
    debug(result); // [[0, 'foo'], [1, 'bar'], [2, 'baz']]
}).begin(array);</pre>

<pre>// コールバック関数を使った例 (配列)

var arr = ['foo', 'bar', 'baz'];

Pot.Deferred.begin(function() {
    return arr;
}).items(function(item, array) {
    return '(' + item[0] + ')' + item[1];
}).then(function(result) {
    debug(result); // ['(0)foo', '(1)bar', '(2)baz']
});</pre>

<pre>// コールバック関数を使った例 (オブジェクト)

var obj = {foo: 1, bar: 2, baz: 3};

Pot.Deferred.begin(function() {
    return obj;
}).items(function(item) {
    return [item[0] + '::' + item[1]];
}).then(function(result) {
    debug(result); // [['foo::1'], ['bar::2'], ['baz::3']]
});</pre>

    </div>
  </dd>
</dl>

<!--}}}:#Pot.js-reference-content-->
</div>

<noscript>
 <style type="text/css">
 body {
   padding-top: 120px;
 }
 .potjs-reference-noscript-notice {
   position: absolute;
   left: 35%;
   top: 10px;
   color: #e53d5e;
   border: 1px solid #e53d5e;
   background: #ffd8d7;
   padding: 8px;
 }
 .potjs-reference-noscript-notice a {
   font-weight: bold;
   text-decoration: underline;
 }
 </style>
 <div class="potjs-reference-noscript-notice">
  <p>このページは直接参照するものではありません。</p>
  <p><a href="./">Pot.js / PotLite.js リファレンスはこちらです</a></p>
 </div>
</noscript>
</body>
</html>